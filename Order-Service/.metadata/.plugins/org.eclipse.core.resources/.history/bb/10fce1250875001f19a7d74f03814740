package com.durgesh.learn.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.durgesh.learn.dto.OrderRequestDto;
import com.durgesh.learn.entity.PurchaseOrder;
import com.durgesh.learn.enumm.OrderStatus;
import com.durgesh.learn.repository.OrderRepository;

@Service
public class OrderService {

	@Autowired
	private OrderRepository orderRepository;


	public PurchaseOrder createOrder(OrderRequestDto orderRequestDto) {

		PurchaseOrder order = orderRepository.save(convertDtoToEntity(orderRequestDto));
		orderRequestDto.setOrderId(order.getId());

	}
	
	
	 private PurchaseOrder convertDtoToEntity(OrderRequestDto dto) {
	        PurchaseOrder purchaseOrder = new PurchaseOrder();
	        purchaseOrder.setProductId(dto.getProductId());
	        purchaseOrder.setUserId(dto.getUserId());
	        purchaseOrder.setOrderStatus(OrderStatus.ORDER_CREATED);
	        purchaseOrder.setPrice(dto.getAmount());
	        return purchaseOrder;
	    }
	 
}
